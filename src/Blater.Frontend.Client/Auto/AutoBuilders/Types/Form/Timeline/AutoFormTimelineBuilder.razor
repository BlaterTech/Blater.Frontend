@inherits AutoFormBuilder<T>
@typeparam T where T : BaseDataModel

<BlaterCascadingValue
    T="T"
    Id="@CascadingValue">
    <MudTimeline
        TimelineOrientation="TimelineOrientation.Horizontal"
        TimelinePosition="TimelinePosition.Top"
        Reverse="false"
        TimelineAlign="TimelineAlign.Default">
        @foreach (var step in Steps)
        {
            var stepKey = step.Key;
            var stepValue = step.Value;
            <MudTimelineItem
                Color="@(_currentStep >= stepKey ? Color.Primary : Color.Surface)"
                Variant="Variant.Filled"
                Size="Size.Large">
                <ItemDot>
                    @if (_currentStep > stepKey)
                    {
                        <MudIcon Icon="@Material.Filled.Done"/>
                    }
                    else
                    {
                        <MudText>
                            @stepKey
                        </MudText>
                    }
                </ItemDot>
                <ItemContent>
                    <MudText
                        Color="@(_currentStep >= stepKey ? Color.Primary : Color.Default)"
                        Align="Align.Center">
                        @LocalizationService.GetValue($"TimeLine-{stepValue}")
                    </MudText>
                </ItemContent>
            </MudTimelineItem>
        }
    </MudTimeline>
    
    <div 
        id="@($"auto-form-group-{_currentStep}")" 
        class="my-4">
        @RenderAutoFormBuilder()
    </div>

    <div id="steps-buttons" class="d-flex justify-space-between flex-grow-1 gap-4 mt-4 pa-4">
        <MudButton
            Color="Color.Default"
            StartIcon="@Material.Filled.ArrowBack"
            IconSize="Size.Medium"
            Variant="Variant.Text"
            OnClick="@GoBackCallback">
            @LocalizationService.GetValue($"Auto{DisplayType}-Button-{typeof(T).Name}-GoBack")
        </MudButton>
        <MudButton
            Color="Color.Default"
            EndIcon="@Material.Filled.ArrowForward"
            Variant="Variant.Text"
            OnClick="@NextCallback">
            @LocalizationService.GetValue($"Auto{DisplayType}-Button-{typeof(T).Name}-Next")
        </MudButton>
    </div>
    
</BlaterCascadingValue>